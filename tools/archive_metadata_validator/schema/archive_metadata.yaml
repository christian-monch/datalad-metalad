$schema": "http://json-schema.org/draft-07/schema#"
"$id": "http://psychoinformatics.inm7.de/schemas/archived_study.json"

definitions:
  person-data:
    type: object
    required:
      - person
    properties:
      person:
        type: object
        required:
          - first_name
          - last_name
        properties:
          first_name:
            type: string
          last_name:
            type: string
          id:
            type: string
          title:
            type: string
          affiliation:
            type: string
          role:
            $ref: "#definitions/role"
          email:
            type: string
          additional_contact_information:
            type: string
          orcid-id:
            type: string

  role:
    type: string

  named-person-ref:
    type: object
    required:
      - first_name
      - last_name
    properties:
      first_name:
        type: string
      last_name:
        type: string

  id-person-ref:
    type: string

  person-ref:
    oneOf:
      - $ref: "#definitions/named-person-ref"
      - $ref: "#definitions/id-person-ref"

  person-ref-list:
    type: array
    items:
      $ref: "#definitions/person-ref"

  date:
    type: string
    format: date

  publication:
    type: object
    properties:
      publication:
        type: object
        required:
          - title
          - authors
          - date
        properties:
          title:
            type: string
          authors:
            $ref: "#definitions/person-ref-list"
          date:
            $ref: "#definitions/date"
          doi:
            type: string
          publication:
            type: string
          series:
            type: integer
          volume:
            type: integer
          pages:
            type: string
          publisher:
            type: string

  keywords:
    type: array
    items:
      type: string

  person-list:
    type: array
    items:
      $ref: "#definitions/person-data"

  publications:
    type: array
    items:
      $ref: "#definitions/publication"

  availability:
    description: Is an object publicly available, not available, or only available on request
    type: string
    enum:
      - public
      - private
      - controlled

  dataset:
    description: The data that should be archived
    type: object
    required:
      - name
      - url
    properties:
      name:
        type: string
      url:
        description: URL of the entry point for the data
        type: string
      description:
        description: Human-readable description of the data and what it describes
        type: string
      data_format:
        type: string
      availability:
        $ref: "#definitions/availability"
      license:
        description: Human-readable description of the license under which the data can be used
        type: string
      keywords:
        $ref: "#definitions/keywords"
      contact_person:
        $ref: "#definitions/person-ref"

type: object
required:
  - study
properties:
  study:
    type: object
    required:
      - name
      - dataset
    properties:
      name:
        type: string
      purpose:
        description: Why was the study performed
        type: string
      start_date:
        $ref: "#definitions/date"
      end_date:
        $ref: "#definitions/date"
      keywords:
        $ref: "#definitions/keywords"
      persons:
        $ref: "#definitions/person-list"
      contact_person:
        $ref: "#definitions/person-ref"
      publications:
        $ref: "#definitions/publications"
      dataset:
        $ref: "#definitions/dataset"
